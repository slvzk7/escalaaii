<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Escala 2026 | Elenco Completo</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&family=Teko:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #00f2ff;
            --secondary: #7000ff;
            --accent: #ff0055;
            --bg-dark: #0f172a;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-main: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Outfit', sans-serif;
            background: radial-gradient(circle at top right, #1e1e2f, #000000);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- HEADER --- */
        header {
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--glass-border);
            z-index: 20;
        }

        .brand {
            font-family: 'Teko', sans-serif;
            font-size: 1.8rem;
            text-transform: uppercase;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .controls { display: flex; gap: 8px; }

        select, button.reset-btn {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-family: 'Outfit';
            cursor: pointer;
            outline: none;
        }
        
        button.reset-btn:hover { background: var(--accent); border-color: var(--accent); }

        /* --- CAMPO 3D --- */
        main {
            flex: 1;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1200px;
            overflow: hidden;
            background: linear-gradient(to bottom, #111, #222);
        }

        .pitch {
            width: 95%; max-width: 500px; aspect-ratio: 2/3;
            background: 
                linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)),
                repeating-linear-gradient(0deg, #2e7d32, #2e7d32 10%, #388e3c 10%, #388e3c 20%);
            border-radius: 12px;
            position: relative;
            transform: rotateX(20deg) scale(0.95);
            box-shadow: 0 40px 80px rgba(0,0,0,0.8);
            border: 4px solid rgba(255,255,255,0.7);
            transition: transform 0.4s ease;
        }

        /* Linhas do Campo */
        .line { position: absolute; border: 2px solid rgba(255,255,255,0.4); pointer-events: none; }
        .center-circle { width: 80px; height: 80px; border-radius: 50%; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .mid-line { width: 100%; top: 50%; border-bottom: none; height: 2px; background: rgba(255,255,255,0.4); border:none; }
        .box-top { width: 60%; height: 14%; top: 0; left: 20%; border-top: none; }
        .box-bottom { width: 60%; height: 14%; bottom: 0; left: 20%; border-bottom: none; }

        /* --- CARD JOGADOR (Draggable) --- */
        .player-card {
            position: absolute;
            width: 70px;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: grab;
            transform: translate(-50%, -50%);
            transition: transform 0.1s;
            z-index: 10;
        }
        .player-card:active { cursor: grabbing; transform: translate(-50%, -50%) scale(1.1); z-index: 100; }

        .avatar-container {
            width: 48px; height: 48px;
            background: #333;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            display: flex; justify-content: center; align-items: center;
            overflow: hidden; position: relative;
        }
        .avatar-img { width: 100%; height: 100%; object-fit: cover; }
        .avatar-icon { font-size: 20px; color: #aaa; }

        .pos-badge {
            position: absolute; top: -5px; right: -5px;
            background: var(--bg-dark); color: var(--primary);
            font-size: 0.6rem; font-weight: bold;
            padding: 2px 5px; border-radius: 8px;
            border: 1px solid var(--primary); z-index: 2;
        }

        .info-box {
            margin-top: -8px;
            background: rgba(20, 20, 20, 0.9);
            backdrop-filter: blur(4px);
            padding: 2px 6px;
            border-radius: 6px;
            border: 1px solid var(--glass-border);
            text-align: center;
            min-width: 80px;
        }
        .p-name { font-family: 'Teko'; font-size: 0.9rem; line-height: 1; color: white; white-space: nowrap; }
        .p-team { font-size: 0.6rem; color: #ccc; }
        
        /* Estado Vazio */
        .empty-card .avatar-container { background: rgba(0,0,0,0.4); border: 2px dashed rgba(255,255,255,0.3); }
        .empty-card .info-box { display: none; }
        .empty-label { 
            margin-top: 5px; background: var(--accent); color: white; 
            padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; font-weight: bold; 
        }

        /* --- SIDEBAR --- */
        .sidebar {
            position: fixed; top: 0; right: -100%;
            width: 100%; max-width: 360px; height: 100%;
            background: #111;
            box-shadow: -5px 0 30px rgba(0,0,0,0.8);
            transition: 0.3s ease-in-out;
            z-index: 50;
            display: flex; flex-direction: column;
            border-left: 1px solid #333;
        }
        .sidebar.active { right: 0; }

        .sidebar-header {
            padding: 15px; background: #1a1a1a;
            border-bottom: 1px solid #333;
            display: flex; justify-content: space-between; align-items: center;
        }
        .sidebar-title { font-family: 'Teko'; font-size: 1.4rem; color: var(--primary); }
        .close-btn { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }

        .search-container { padding: 10px; }
        #searchInput {
            width: 100%; background: #222; border: 1px solid #444; color: white;
            padding: 10px; border-radius: 6px; outline: none; font-family: 'Outfit';
        }

        .player-list { flex: 1; overflow-y: auto; padding: 0 10px 20px; }

        .list-item {
            display: flex; align-items: center;
            background: #1f1f1f; margin-bottom: 8px; padding: 8px;
            border-radius: 6px; cursor: pointer; border-left: 3px solid transparent;
        }
        .list-item:hover { background: #2a2a2a; border-left-color: var(--primary); }
        
        .list-img {
            width: 35px; height: 35px; border-radius: 50%; 
            background: #333; margin-right: 10px; overflow: hidden;
        }
        .list-details h4 { font-size: 0.9rem; margin-bottom: 2px; }
        .list-details p { font-size: 0.7rem; color: #888; }
        .list-pos { 
            margin-left: auto; font-size: 0.7rem; font-weight: bold; 
            background: #333; padding: 3px 6px; border-radius: 4px; 
            color: var(--primary);
        }

        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 40;
            opacity: 0; pointer-events: none; transition: 0.3s;
        }
        .overlay.active { opacity: 1; pointer-events: auto; }

    </style>
</head>
<body>

    <header>
        <div class="brand"><i class="fas fa-fire"></i> Fut 2026</div>
        <div class="controls">
            <button class="reset-btn" onclick="resetPositions()" title="Resetar"><i class="fas fa-sync"></i></button>
            <select id="formationSelect">
                <option value="4-3-3">4-3-3</option>
                <option value="4-4-2">4-4-2</option>
                <option value="3-5-2">3-5-2</option>
                <option value="4-2-3-1">4-2-3-1</option>
                <option value="5-3-2">5-3-2</option>
            </select>
        </div>
    </header>

    <main>
        <div class="pitch" id="pitch">
            <div class="line mid-line"></div>
            <div class="line center-circle"></div>
            <div class="line box-top"></div>
            <div class="line box-bottom"></div>
            </div>
    </main>

    <div class="overlay" id="overlay" onclick="closeSidebar()"></div>
    
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-title">Selecione</div>
            <button class="close-btn" onclick="closeSidebar()">&times;</button>
        </div>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Nome, time ou posição...">
        </div>
        <div class="player-list" id="playerList"></div>
    </div>

    <script>
        // --- BASE DE DADOS COMPLETA 2026 ---
        const playersData = [
            // PALMEIRAS
            { name: "Carlos Miguel", team: "Palmeiras", pos: ["GOL"] },
            { name: "Marcelo Lomba", team: "Palmeiras", pos: ["GOL"] },
            { name: "Aranha", team: "Palmeiras", pos: ["GOL"] },
            { name: "Murilo", team: "Palmeiras", pos: ["ZAG"] },
            { name: "Gustavo Gómez", team: "Palmeiras", pos: ["ZAG"] },
            { name: "Bruno Fuchs", team: "Palmeiras", pos: ["ZAG"] },
            { name: "Luis Benedetti", team: "Palmeiras", pos: ["ZAG"] },
            { name: "Agustín Giay", team: "Palmeiras", pos: ["LAT"] },
            { name: "Khellven", team: "Palmeiras", pos: ["LAT"] },
            { name: "Piquerez", team: "Palmeiras", pos: ["LAT"] },
            { name: "Jefté", team: "Palmeiras", pos: ["LAT"] },
            { name: "Arthur Gabriel", team: "Palmeiras", pos: ["LAT"] },
            { name: "E. Martínez", team: "Palmeiras", pos: ["VOL"] },
            { name: "Marlon Freitas", team: "Palmeiras", pos: ["VOL"] },
            { name: "Luis Pacheco", team: "Palmeiras", pos: ["VOL"] },
            { name: "Andreas Pereira", team: "Palmeiras", pos: ["MEI"] },
            { name: "L. Evangelista", team: "Palmeiras", pos: ["MEI"] },
            { name: "Mauricio", team: "Palmeiras", pos: ["MEI"] },
            { name: "Figueiredo", team: "Palmeiras", pos: ["MEI"] },
            { name: "Larson", team: "Palmeiras", pos: ["MEI"] },
            { name: "Jhon Arias", team: "Palmeiras", pos: ["ATA"] },
            { name: "Ramón Sosa", team: "Palmeiras", pos: ["ATA"] },
            { name: "Felipe Anderson", team: "Palmeiras", pos: ["ATA"] },
            { name: "Paulinho", team: "Palmeiras", pos: ["ATA"] },
            { name: "Bruno Rodrigues", team: "Palmeiras", pos: ["ATA"] },
            { name: "Riquelme Fillipi", team: "Palmeiras", pos: ["ATA"] },
            { name: "Allan (ATA)", team: "Palmeiras", pos: ["ATA"] },
            { name: "Vitor Roque", team: "Palmeiras", pos: ["CA"] },
            { name: "J. M. López", team: "Palmeiras", pos: ["CA"] },
            { name: "Luighi", team: "Palmeiras", pos: ["CA"] },
            { name: "Erick Belé", team: "Palmeiras", pos: ["CA"] },

            // CORINTHIANS
            { name: "Hugo Souza", team: "Corinthians", pos: ["GOL"] },
            { name: "Matheus Donelli", team: "Corinthians", pos: ["GOL"] },
            { name: "Felipe Longo", team: "Corinthians", pos: ["GOL"] },
            { name: "Kauê", team: "Corinthians", pos: ["GOL"] },
            { name: "André Ramalho", team: "Corinthians", pos: ["ZAG"] },
            { name: "Tchoca", team: "Corinthians", pos: ["ZAG"] },
            { name: "Cacá", team: "Corinthians", pos: ["ZAG"] },
            { name: "Gustavo Henrique", team: "Corinthians", pos: ["ZAG"] },
            { name: "Gabriel Paulista", team: "Corinthians", pos: ["ZAG"] },
            { name: "Renato Santos", team: "Corinthians", pos: ["ZAG"] },
            { name: "Matheuzinho", team: "Corinthians", pos: ["LAT"] },
            { name: "Pedro Milans", team: "Corinthians", pos: ["LAT"] },
            { name: "Matheus Bidu", team: "Corinthians", pos: ["LAT"] },
            { name: "Hugo", team: "Corinthians", pos: ["LAT"] },
            { name: "Fabrizio Angileri", team: "Corinthians", pos: ["LAT"] },
            { name: "Raniele", team: "Corinthians", pos: ["VOL"] },
            { name: "Allan", team: "Corinthians", pos: ["VOL"] },
            { name: "José Martínez", team: "Corinthians", pos: ["VOL"] },
            { name: "Charles", team: "Corinthians", pos: ["VOL"] },
            { name: "Rodrigo Garro", team: "Corinthians", pos: ["MEI"] },
            { name: "Breno Bidon", team: "Corinthians", pos: ["MEI"] },
            { name: "Alex Santana", team: "Corinthians", pos: ["MEI"] },
            { name: "Matheus Pereira", team: "Corinthians", pos: ["MEI"] },
            { name: "André Carrillo", team: "Corinthians", pos: ["MEI"] },
            { name: "Vitinho", team: "Corinthians", pos: ["ATA"] },
            { name: "Kaio César", team: "Corinthians", pos: ["ATA"] },
            { name: "Kayke", team: "Corinthians", pos: ["ATA"] },
            { name: "Dieguinho", team: "Corinthians", pos: ["ATA"] },
            { name: "Yuri Alberto", team: "Corinthians", pos: ["CA"] },
            { name: "Memphis Depay", team: "Corinthians", pos: ["CA", "ATA"] },
            { name: "Pedro Raul", team: "Corinthians", pos: ["CA"] },
            { name: "Gui Negão", team: "Corinthians", pos: ["CA"] },

            // SÃO PAULO
            { name: "Carlos Coronel", team: "São Paulo", pos: ["GOL"] },
            { name: "Rafael", team: "São Paulo", pos: ["GOL"] },
            { name: "Young", team: "São Paulo", pos: ["GOL"] },
            { name: "Felipe Preis", team: "São Paulo", pos: ["GOL"] },
            { name: "Nahuel Ferraresi", team: "São Paulo", pos: ["ZAG"] },
            { name: "Alan Franco", team: "São Paulo", pos: ["ZAG"] },
            { name: "Rafael Tolói", team: "São Paulo", pos: ["ZAG"] },
            { name: "Arboleda", team: "São Paulo", pos: ["ZAG"] },
            { name: "Sabino", team: "São Paulo", pos: ["ZAG"] },
            { name: "Matheus Dória", team: "São Paulo", pos: ["ZAG"] },
            { name: "Cédric Soares", team: "São Paulo", pos: ["LAT"] },
            { name: "Maik", team: "São Paulo", pos: ["LAT"] },
            { name: "Lucas Ramon", team: "São Paulo", pos: ["LAT"] },
            { name: "Igor Felisberto", team: "São Paulo", pos: ["LAT"] },
            { name: "Enzo Díaz", team: "São Paulo", pos: ["LAT"] },
            { name: "Wendell", team: "São Paulo", pos: ["LAT"] },
            { name: "Nicolas", team: "São Paulo", pos: ["LAT"] },
            { name: "Pablo Maia", team: "São Paulo", pos: ["VOL"] },
            { name: "Luan", team: "São Paulo", pos: ["VOL"] },
            { name: "Felipe Negrucci", team: "São Paulo", pos: ["VOL"] },
            { name: "Hugo Leonardo", team: "São Paulo", pos: ["VOL"] },
            { name: "Oscar", team: "São Paulo", pos: ["MEI"] },
            { name: "Marcos Antônio", team: "São Paulo", pos: ["MEI"] },
            { name: "Damián Bobadilla", team: "São Paulo", pos: ["MEI"] },
            { name: "Alisson", team: "São Paulo", pos: ["MEI"] },
            { name: "Danielzinho", team: "São Paulo", pos: ["MEI"] },
            { name: "Pedro Ferreira", team: "São Paulo", pos: ["MEI"] },
            { name: "Lucas Moura", team: "São Paulo", pos: ["ATA"] },
            { name: "Ferreirinha", team: "São Paulo", pos: ["ATA"] },
            { name: "Tetê", team: "São Paulo", pos: ["ATA"] },
            { name: "Lucca", team: "São Paulo", pos: ["ATA"] },
            { name: "Ryan Francisco", team: "São Paulo", pos: ["ATA"] },
            { name: "Gonzalo Tapia", team: "São Paulo", pos: ["ATA"] },
            { name: "André Silva", team: "São Paulo", pos: ["ATA"] },
            { name: "Calleri", team: "São Paulo", pos: ["CA"] },
            { name: "Luciano", team: "São Paulo", pos: ["CA", "ATA"] },
            { name: "Paulinho (CA)", team: "São Paulo", pos: ["CA"] },

            // FLAMENGO
            { name: "Agustín Rossi", team: "Flamengo", pos: ["GOL"] },
            { name: "Andrew", team: "Flamengo", pos: ["GOL"] },
            { name: "Dyogo Alves", team: "Flamengo", pos: ["GOL"] },
            { name: "Léo Pereira", team: "Flamengo", pos: ["ZAG"] },
            { name: "Léo Ortiz", team: "Flamengo", pos: ["ZAG"] },
            { name: "Vitão", team: "Flamengo", pos: ["ZAG"] },
            { name: "Danilo (ZAG)", team: "Flamengo", pos: ["ZAG"] },
            { name: "João Victor", team: "Flamengo", pos: ["ZAG"] },
            { name: "Emerson Royal", team: "Flamengo", pos: ["LAT"] },
            { name: "Varela", team: "Flamengo", pos: ["LAT"] },
            { name: "Ayrton Lucas", team: "Flamengo", pos: ["LAT"] },
            { name: "Alex Sandro", team: "Flamengo", pos: ["LAT"] },
            { name: "Erick Pulgar", team: "Flamengo", pos: ["VOL"] },
            { name: "Jorginho", team: "Flamengo", pos: ["VOL"] },
            { name: "Evertton Araújo", team: "Flamengo", pos: ["VOL"] },
            { name: "Lucas Paquetá", team: "Flamengo", pos: ["MEI"] },
            { name: "Arrascaeta", team: "Flamengo", pos: ["MEI"] },
            { name: "De La Cruz", team: "Flamengo", pos: ["MEI", "VOL"] },
            { name: "Saúl Ñíguez", team: "Flamengo", pos: ["MEI"] },
            { name: "Jorge Carrascal", team: "Flamengo", pos: ["MEI"] },
            { name: "Samuel Lino", team: "Flamengo", pos: ["ATA"] },
            { name: "Everton Cebolinha", team: "Flamengo", pos: ["ATA"] },
            { name: "Luiz Araújo", team: "Flamengo", pos: ["ATA"] },
            { name: "Gonzalo Plata", team: "Flamengo", pos: ["ATA"] },
            { name: "Wallace Yan", team: "Flamengo", pos: ["ATA"] },
            { name: "Bruno Henrique", team: "Flamengo", pos: ["ATA"] },
            { name: "Pedro", team: "Flamengo", pos: ["CA"] },

            // BOTAFOGO
            { name: "Léo Linck", team: "Botafogo", pos: ["GOL"] },
            { name: "Neto", team: "Botafogo", pos: ["GOL"] },
            { name: "Cristhian Loor", team: "Botafogo", pos: ["GOL"] },
            { name: "Raul", team: "Botafogo", pos: ["GOL"] },
            { name: "Alex. Barboza", team: "Botafogo", pos: ["ZAG"] },
            { name: "Bastos", team: "Botafogo", pos: ["ZAG"] },
            { name: "Kaio", team: "Botafogo", pos: ["ZAG"] },
            { name: "Ythallo", team: "Botafogo", pos: ["ZAG"] },
            { name: "Vitinho", team: "Botafogo", pos: ["LAT"] },
            { name: "Mateo Ponte", team: "Botafogo", pos: ["LAT"] },
            { name: "Alex Telles", team: "Botafogo", pos: ["LAT"] },
            { name: "Marçal", team: "Botafogo", pos: ["LAT"] },
            { name: "Jhoan Hernández", team: "Botafogo", pos: ["LAT"] },
            { name: "Danilo", team: "Botafogo", pos: ["VOL"] },
            { name: "Newton", team: "Botafogo", pos: ["VOL"] },
            { name: "Allan (VOL)", team: "Botafogo", pos: ["VOL"] },
            { name: "Wallace Davi", team: "Botafogo", pos: ["VOL"] },
            { name: "Álvaro Montoro", team: "Botafogo", pos: ["MEI"] },
            { name: "Santiago Rodríguez", team: "Botafogo", pos: ["MEI"] },
            { name: "Jordan Barrera", team: "Botafogo", pos: ["MEI"] },
            { name: "Artur", team: "Botafogo", pos: ["ATA"] },
            { name: "Matheus Martins", team: "Botafogo", pos: ["ATA"] },
            { name: "Nathan Fernandes", team: "Botafogo", pos: ["ATA"] },
            { name: "Lucas Villalba", team: "Botafogo", pos: ["ATA"] },
            { name: "Joaquín Correa", team: "Botafogo", pos: ["ATA"] },
            { name: "Arthur Cabral", team: "Botafogo", pos: ["CA", "ATA"] },
            { name: "Chris Ramos", team: "Botafogo", pos: ["ATA"] },

            // FLUMINENSE
            { name: "Fábio", team: "Fluminense", pos: ["GOL"] },
            { name: "Marcelo Pitaluga", team: "Fluminense", pos: ["GOL"] },
            { name: "Vitor Eudes", team: "Fluminense", pos: ["GOL"] },
            { name: "Juan Pablo Freytes", team: "Fluminense", pos: ["ZAG"] },
            { name: "Ignácio", team: "Fluminense", pos: ["ZAG"] },
            { name: "Igor Rabello", team: "Fluminense", pos: ["ZAG"] },
            { name: "Jemmes", team: "Fluminense", pos: ["ZAG"] },
            { name: "Davi Schuindt", team: "Fluminense", pos: ["ZAG"] },
            { name: "João Loiola", team: "Fluminense", pos: ["ZAG"] },
            { name: "Samuel Xavier", team: "Fluminense", pos: ["LAT"] },
            { name: "Guga", team: "Fluminense", pos: ["LAT"] },
            { name: "Julio Fidelis", team: "Fluminense", pos: ["LAT"] },
            { name: "Guilherme Arana", team: "Fluminense", pos: ["LAT"] },
            { name: "René", team: "Fluminense", pos: ["LAT"] },
            { name: "Martinelli", team: "Fluminense", pos: ["VOL"] },
            { name: "Facundo Bernal", team: "Fluminense", pos: ["VOL"] },
            { name: "Otávio", team: "Fluminense", pos: ["VOL"] },
            { name: "Hércules", team: "Fluminense", pos: ["VOL"] },
            { name: "Ganso", team: "Fluminense", pos: ["MEI"] },
            { name: "Nonato", team: "Fluminense", pos: ["MEI"] },
            { name: "Jefferson Savarino", team: "Fluminense", pos: ["MEI", "ATA"] },
            { name: "Luciano Acosta", team: "Fluminense", pos: ["MEI"] },
            { name: "David Terans", team: "Fluminense", pos: ["MEI"] },
            { name: "Rubén Lezcano", team: "Fluminense", pos: ["MEI"] },
            { name: "Yeferson Soteldo", team: "Fluminense", pos: ["ATA"] },
            { name: "Agustín Canobbio", team: "Fluminense", pos: ["ATA"] },
            { name: "Kevin Serna", team: "Fluminense", pos: ["ATA"] },
            { name: "Santiago Moreno", team: "Fluminense", pos: ["ATA"] },
            { name: "Matheus Reis", team: "Fluminense", pos: ["ATA"] },
            { name: "Riquelme", team: "Fluminense", pos: ["ATA"] },
            { name: "Germán Cano", team: "Fluminense", pos: ["CA"] },
            { name: "John Kennedy", team: "Fluminense", pos: ["CA"] },

            // GRÊMIO
            { name: "Weverton (GOL)", team: "Grêmio", pos: ["GOL"] },
            { name: "Gabriel Grando", team: "Grêmio", pos: ["GOL"] },
            { name: "Thiago Beltrame", team: "Grêmio", pos: ["GOL"] },
            { name: "Gabriel Menegon", team: "Grêmio", pos: ["GOL"] },
            { name: "Wagner Leonardo", team: "Grêmio", pos: ["ZAG"] },
            { name: "Walter Kannemann", team: "Grêmio", pos: ["ZAG"] },
            { name: "Fabián Balbuena", team: "Grêmio", pos: ["ZAG"] },
            { name: "Erick Noriega", team: "Grêmio", pos: ["ZAG"] },
            { name: "Gustavo Martins", team: "Grêmio", pos: ["ZAG"] },
            { name: "Viery", team: "Grêmio", pos: ["ZAG"] },
            { name: "Luis Eduardo", team: "Grêmio", pos: ["ZAG"] },
            { name: "João Pedro", team: "Grêmio", pos: ["LAT"] },
            { name: "Marcos Rocha", team: "Grêmio", pos: ["LAT"] },
            { name: "Caio Paulista", team: "Grêmio", pos: ["LAT"] },
            { name: "Marlon", team: "Grêmio", pos: ["LAT"] },
            { name: "Mathías Villasanti", team: "Grêmio", pos: ["VOL"] },
            { name: "Gustavo Cuéllar", team: "Grêmio", pos: ["VOL"] },
            { name: "Leonel Pérez", team: "Grêmio", pos: ["VOL"] },
            { name: "Dodi", team: "Grêmio", pos: ["VOL"] },
            { name: "Arthur Melo", team: "Grêmio", pos: ["MEI"] },
            { name: "Franco Cristaldo", team: "Grêmio", pos: ["MEI"] },
            { name: "Edenilson", team: "Grêmio", pos: ["MEI"] },
            { name: "J. I. Nardoni", team: "Grêmio", pos: ["MEI"] },
            { name: "Miguel Monsalve", team: "Grêmio", pos: ["MEI"] },
            { name: "Riquelme (GRE)", team: "Grêmio", pos: ["MEI"] },
            { name: "Gabriel Mec", team: "Grêmio", pos: ["MEI"] },
            { name: "Tetê (GRE)", team: "Grêmio", pos: ["ATA"] },
            { name: "Cristian Pavón", team: "Grêmio", pos: ["ATA"] },
            { name: "Francis Amuzu", team: "Grêmio", pos: ["ATA"] },
            { name: "Alexander Aravena", team: "Grêmio", pos: ["ATA"] },
            { name: "José Enamorado", team: "Grêmio", pos: ["ATA"] },
            { name: "André Henrique", team: "Grêmio", pos: ["ATA"] },
            { name: "Martin Braithwaite", team: "Grêmio", pos: ["CA"] },
            { name: "Carlos Vinícius", team: "Grêmio", pos: ["CA"] },
            { name: "Roger", team: "Grêmio", pos: ["CA"] },
            { name: "Willian", team: "Grêmio", pos: ["CA"] },

            // VASCO
            { name: "Léo Jardim", team: "Vasco", pos: ["GOL"] },
            { name: "Daniel Fuzato", team: "Vasco", pos: ["GOL"] },
            { name: "Pablo", team: "Vasco", pos: ["GOL"] },
            { name: "Robert Renan", team: "Vasco", pos: ["ZAG"] },
            { name: "Carlos Cuesta", team: "Vasco", pos: ["ZAG"] },
            { name: "Alan Saldivia", team: "Vasco", pos: ["ZAG"] },
            { name: "Lucas Freitas", team: "Vasco", pos: ["ZAG"] },
            { name: "Paulo Henrique", team: "Vasco", pos: ["LAT"] },
            { name: "José Luis Rodríguez", team: "Vasco", pos: ["LAT"] },
            { name: "Lucas Piton", team: "Vasco", pos: ["LAT"] },
            { name: "Cuiabano", team: "Vasco", pos: ["LAT"] },
            { name: "Thiago Mendes", team: "Vasco", pos: ["VOL"] },
            { name: "Tchê Tchê", team: "Vasco", pos: ["VOL"] },
            { name: "Jair", team: "Vasco", pos: ["VOL"] },
            { name: "Hugo Moura", team: "Vasco", pos: ["VOL"] },
            { name: "Cauan Barros", team: "Vasco", pos: ["VOL"] },
            { name: "Mateus Carvalho", team: "Vasco", pos: ["VOL"] },
            { name: "JP", team: "Vasco", pos: ["VOL"] },
            { name: "Philippe Coutinho", team: "Vasco", pos: ["MEI"] },
            { name: "Matheus França", team: "Vasco", pos: ["MEI"] },
            { name: "Guilherme Estrella", team: "Vasco", pos: ["MEI"] },
            { name: "Adson", team: "Vasco", pos: ["ATA"] },
            { name: "Andrés Gómez", team: "Vasco", pos: ["ATA"] },
            { name: "David", team: "Vasco", pos: ["ATA"] },
            { name: "Nuno Moreira", team: "Vasco", pos: ["ATA"] },
            { name: "Johan Rojas", team: "Vasco", pos: ["ATA"] },
            { name: "Marino Hinestroza", team: "Vasco", pos: ["ATA"] },
            { name: "Brenner", team: "Vasco", pos: ["ATA", "CA"] },
            { name: "Claudio Spinelli", team: "Vasco", pos: ["ATA"] },
            
            // CRUZEIRO (Adicionando alguns da lista implícita para completar os grandes)
            { name: "Cássio", team: "Cruzeiro", pos: ["GOL"] },
            { name: "João Marcelo", team: "Cruzeiro", pos: ["ZAG"] },
            { name: "Lucas Villalba (CRU)", team: "Cruzeiro", pos: ["ZAG"] },
            { name: "William", team: "Cruzeiro", pos: ["LAT"] },
            { name: "Matheus Henrique", team: "Cruzeiro", pos: ["VOL"] },
            { name: "Walace", team: "Cruzeiro", pos: ["VOL"] },
            { name: "Matheus Pereira", team: "Cruzeiro", pos: ["MEI"] },
            { name: "Barreal", team: "Cruzeiro", pos: ["ATA"] },
            { name: "Kaio Jorge", team: "Cruzeiro", pos: ["CA"] },
            { name: "Gabriel Veron", team: "Cruzeiro", pos: ["ATA"] }
        ];

        // IDs Unicos
        playersData.forEach((p, i) => p.id = i + 1);

        const pitch = document.getElementById('pitch');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const playerList = document.getElementById('playerList');
        const searchInput = document.getElementById('searchInput');

        let activeSlot = null;
        let squad = {};
        let isDragging = false;
        let activeDragEl = null;
        let startX, startY, startLeft, startTop;

        const formations = {
            '4-3-3': [
                {t: 88, l: 50, r:'GOL'}, 
                {t: 75, l: 15, r:'LAT'}, {t: 80, l: 38, r:'ZAG'}, {t: 80, l: 62, r:'ZAG'}, {t: 75, l: 85, r:'LAT'},
                {t: 60, l: 50, r:'VOL'}, {t: 45, l: 30, r:'MEI'}, {t: 45, l: 70, r:'MEI'},
                {t: 20, l: 15, r:'ATA'}, {t: 15, l: 50, r:'CA'}, {t: 20, l: 85, r:'ATA'}
            ],
            '4-4-2': [
                {t: 88, l: 50, r:'GOL'},
                {t: 75, l: 15, r:'LAT'}, {t: 80, l: 38, r:'ZAG'}, {t: 80, l: 62, r:'ZAG'}, {t: 75, l: 85, r:'LAT'},
                {t: 50, l: 20, r:'MEI'}, {t: 60, l: 40, r:'VOL'}, {t: 60, l: 60, r:'VOL'}, {t: 50, l: 80, r:'MEI'},
                {t: 20, l: 35, r:'ATA'}, {t: 20, l: 65, r:'CA'}
            ],
            '3-5-2': [
                {t: 90, l: 50, r:'GOL'},
                {t: 75, l: 25, r:'ZAG'}, {t: 78, l: 50, r:'ZAG'}, {t: 75, l: 75, r:'ZAG'},
                {t: 55, l: 10, r:'LAT'}, {t: 60, l: 35, r:'VOL'}, {t: 60, l: 65, r:'VOL'}, {t: 55, l: 90, r:'LAT'},
                {t: 40, l: 50, r:'MEI'},
                {t: 20, l: 35, r:'ATA'}, {t: 20, l: 65, r:'CA'}
            ],
            '4-2-3-1': [
                {t: 88, l: 50, r:'GOL'},
                {t: 75, l: 15, r:'LAT'}, {t: 80, l: 35, r:'ZAG'}, {t: 80, l: 65, r:'ZAG'}, {t: 75, l: 85, r:'LAT'},
                {t: 60, l: 40, r:'VOL'}, {t: 60, l: 60, r:'VOL'},
                {t: 40, l: 20, r:'MEI'}, {t: 35, l: 50, r:'MEI'}, {t: 40, l: 80, r:'MEI'},
                {t: 15, l: 50, r:'CA'}
            ],
            '5-3-2': [
                {t: 90, l: 50, r:'GOL'},
                {t: 70, l: 10, r:'LAT'}, {t: 80, l: 30, r:'ZAG'}, {t: 85, l: 50, r:'ZAG'}, {t: 80, l: 70, r:'ZAG'}, {t: 70, l: 90, r:'LAT'},
                {t: 55, l: 40, r:'VOL'}, {t: 55, l: 60, r:'VOL'}, {t: 45, l: 50, r:'MEI'},
                {t: 20, l: 35, r:'ATA'}, {t: 20, l: 65, r:'CA'}
            ]
        };

        function init() {
            renderPitch('4-3-3');
            document.getElementById('formationSelect').addEventListener('change', e => {
                squad = {}; 
                renderPitch(e.target.value);
            });
            searchInput.addEventListener('input', renderList);
        }

        function renderPitch(fmt) {
            pitch.innerHTML = `
                <div class="line mid-line"></div>
                <div class="line center-circle"></div>
                <div class="line box-top"></div>
                <div class="line box-bottom"></div>
            `;
            formations[fmt].forEach((pos, i) => {
                const el = document.createElement('div');
                el.className = 'player-card empty-card';
                el.style.top = pos.t + '%';
                el.style.left = pos.l + '%';
                el.dataset.idx = i;
                el.dataset.role = pos.r;
                el.dataset.ot = pos.t + '%';
                el.dataset.ol = pos.l + '%';
                el.id = `slot-${i}`;
                
                updateSlot(el, null, pos.r);
                
                el.addEventListener('mousedown', dragStart);
                el.addEventListener('touchstart', dragStart, {passive:false});
                el.addEventListener('click', e => {
                    if(!isDragging) openSidebar(i, pos.r);
                });
                
                pitch.appendChild(el);
            });
        }

        function updateSlot(el, p, r) {
            if(p) {
                el.className = 'player-card';
                el.innerHTML = `
                    <div class="pos-badge">${p.pos[0]}</div>
                    <div class="avatar-container">
                        <img src="https://ui-avatars.com/api/?name=${p.name}&background=random&color=fff&size=128" class="avatar-img">
                    </div>
                    <div class="info-box">
                        <div class="p-name">${p.name.split(' ')[0]}</div>
                        <div class="p-team">${p.team}</div>
                    </div>
                `;
            } else {
                el.className = 'player-card empty-card';
                el.innerHTML = `
                    <div class="avatar-container"><i class="fas fa-plus avatar-icon"></i></div>
                    <div class="empty-label">${r}</div>
                `;
            }
        }

        function openSidebar(idx, role) {
            activeSlot = idx;
            sidebar.classList.add('active');
            overlay.classList.add('active');
            document.querySelector('.sidebar-title').innerText = `Escolher ${role}`;
            searchInput.value = '';
            renderList();
        }

        function closeSidebar() {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
        }

        function renderList() {
            const term = searchInput.value.toLowerCase();
            const slotRole = document.getElementById(`slot-${activeSlot}`).dataset.role;
            
            playerList.innerHTML = '';

            // Botão remover
            if(squad[activeSlot]) {
                const rm = document.createElement('div');
                rm.className = 'list-item';
                rm.innerHTML = '<div style="color:red; text-align:center; width:100%">Remover Jogador</div>';
                rm.onclick = () => selectPlayer(null);
                playerList.appendChild(rm);
            }

            const filtered = playersData.filter(p => {
                const matchText = p.name.toLowerCase().includes(term) || p.team.toLowerCase().includes(term);
                // Se não digitou nada, filtra pela posição. Se digitou, mostra tudo.
                if(!term) {
                    if(slotRole === 'GOL' && !p.pos.includes('GOL')) return false;
                    // Lógica simples: Defensores
                    if(slotRole === 'ZAG' && !p.pos.includes('ZAG')) return false;
                }
                return matchText;
            });

            filtered.forEach(p => {
                // Remove já escalados
                if(Object.values(squad).some(s => s && s.id === p.id && s.id !== squad[activeSlot]?.id)) return;

                const d = document.createElement('div');
                d.className = 'list-item';
                d.innerHTML = `
                    <div class="list-img">
                        <img src="https://ui-avatars.com/api/?name=${p.name}&background=random&color=fff" style="width:100%">
                    </div>
                    <div class="list-details">
                        <h4>${p.name}</h4>
                        <p>${p.team}</p>
                    </div>
                    <div class="list-pos">${p.pos[0]}</div>
                `;
                d.onclick = () => selectPlayer(p);
                playerList.appendChild(d);
            });
        }

        function selectPlayer(p) {
            squad[activeSlot] = p;
            const el = document.getElementById(`slot-${activeSlot}`);
            updateSlot(el, p, el.dataset.role);
            closeSidebar();
        }

        function resetPositions() {
            document.querySelectorAll('.player-card').forEach(el => {
                el.style.top = el.dataset.ot;
                el.style.left = el.dataset.ol;
            });
        }

        // Drag Logic Simplificada
        function dragStart(e) {
            activeDragEl = e.currentTarget;
            isDragging = false;
            const evt = e.type.includes('mouse') ? e : e.touches[0];
            startX = evt.clientX;
            startY = evt.clientY;
            startLeft = activeDragEl.offsetLeft;
            startTop = activeDragEl.offsetTop;

            document.addEventListener('mousemove', dragMove);
            document.addEventListener('touchmove', dragMove, {passive:false});
            document.addEventListener('mouseup', dragEnd);
            document.addEventListener('touchend', dragEnd);
        }

        function dragMove(e) {
            const evt = e.type.includes('mouse') ? e : e.touches[0];
            if(Math.abs(evt.clientX - startX) > 5 || Math.abs(evt.clientY - startY) > 5) {
                isDragging = true;
                if(e.cancelable) e.preventDefault();
            }
            if(!isDragging) return;
            
            activeDragEl.style.left = (startLeft + (evt.clientX - startX)) + 'px';
            activeDragEl.style.top = (startTop + (evt.clientY - startY)) + 'px';
            activeDragEl.style.zIndex = 1000;
        }

        function dragEnd() {
            document.removeEventListener('mousemove', dragMove);
            document.removeEventListener('touchmove', dragMove);
            document.removeEventListener('mouseup', dragEnd);
            document.removeEventListener('touchend', dragEnd);
            if(activeDragEl) activeDragEl.style.zIndex = '';
            setTimeout(() => isDragging = false, 50);
        }

        init();
    </script>
</body>
</html>
