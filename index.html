<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Fut 2026 | Ultimate Edition</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&family=Teko:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        :root {
            --primary: #00f2ff;
            --secondary: #7000ff;
            --accent: #ff0055;
            --bg-dark: #0a0a12;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg-dark);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(112, 0, 255, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(0, 242, 255, 0.1) 0%, transparent 40%),
                url('https://www.transparenttextures.com/patterns/cubes.png');
            color: var(--text-main);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- HEADER --- */
        header {
            height: 60px;
            padding: 0 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--glass-border);
            z-index: 20;
        }

        .brand {
            font-family: 'Teko', sans-serif;
            font-size: 1.8rem;
            letter-spacing: 1px;
            background: linear-gradient(90deg, #fff, var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex; align-items: center; gap: 10px;
        }

        .controls { display: flex; gap: 10px; }

        select, button.action-btn {
            background: rgba(255,255,255,0.08);
            border: 1px solid var(--glass-border);
            color: white;
            padding: 8px 15px;
            border-radius: 6px;
            font-family: 'Outfit';
            cursor: pointer;
            outline: none;
            transition: 0.3s;
            font-weight: bold;
        }
        button.action-btn:hover { background: var(--primary); color: black; border-color: var(--primary); }
        .download-btn { background: var(--accent) !important; border-color: var(--accent) !important; }
        .download-btn:hover { background: #ff3377 !important; color: white !important; }

        /* --- LAYOUT PRINCIPAL --- */
        .main-layout {
            display: flex;
            flex: 1;
            height: calc(100vh - 60px);
            overflow: hidden;
        }

        /* ÁREA DE CAPTURA (CAMPO + BANCO) */
        .capture-zone {
            flex: 2;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            background: transparent; /* Importante para o print ficar limpo */
        }

        .pitch-container {
            perspective: 1000px;
            width: 100%;
            height: 75%; /* Espaço para o campo */
            display: flex;
            justify-content: center;
            align-items: flex-end;
            padding-bottom: 20px;
        }

        .pitch {
            width: 360px; 
            height: 480px;
            background: 
                linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)),
                repeating-linear-gradient(0deg, #1a4f1a, #1a4f1a 10%, #225e22 10%, #225e22 20%);
            border-radius: 8px;
            position: relative;
            transform: rotateX(10deg);
            box-shadow: 0 20px 50px rgba(0,0,0,0.6), 0 0 0 4px rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.6);
            transition: transform 0.4s ease;
        }

        /* Detalhes do Campo */
        .line { position: absolute; border: 2px solid rgba(255,255,255,0.4); pointer-events: none; }
        .center-circle { width: 70px; height: 70px; border-radius: 50%; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .mid-line { width: 100%; top: 50%; border-bottom: none; height: 1px; background: rgba(255,255,255,0.4); border:none; }
        .box-top { width: 50%; height: 13%; top: 0; left: 25%; border-top: none; }
        .box-bottom { width: 50%; height: 13%; bottom: 0; left: 25%; border-bottom: none; }

        /* BANCO DE RESERVAS */
        .bench-container {
            height: 20%;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            z-index: 10;
        }

        .bench-box {
            background: rgba(0,0,0,0.6);
            border: 1px solid var(--glass-border);
            padding: 10px 20px;
            border-radius: 15px;
            display: flex;
            gap: 8px;
            backdrop-filter: blur(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .bench-slot {
            width: 50px;
            height: 70px;
            position: relative;
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
            cursor: pointer;
            border: 1px dashed rgba(255,255,255,0.2);
            transition: 0.2s;
        }
        .bench-slot:hover { border-color: var(--primary); background: rgba(255,255,255,0.1); }
        .bench-label {
            position: absolute; bottom: -18px; width: 100%; 
            text-align: center; font-size: 0.7rem; color: #888; font-family:'Teko';
        }

        /* DIREITA: INFO */
        .kits-section {
            flex: 1;
            min-width: 300px;
            background: rgba(15, 15, 25, 0.85);
            border-left: 1px solid var(--glass-border);
            padding: 25px;
            overflow-y: auto;
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .section-title {
            font-family: 'Teko';
            font-size: 1.5rem;
            color: var(--primary);
            border-bottom: 2px solid var(--glass-border);
            padding-bottom: 10px;
        }

        /* Painel de Status Calculado */
        .stats-panel {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid var(--glass-border);
        }
        .stat-row { display: flex; justify-content: space-between; margin-bottom: 8px; align-items: center; }
        .stat-label { color: #aaa; font-size: 0.9rem; }
        .stat-val { font-family: 'Teko'; font-size: 1.4rem; color: white; }
        #teamRating { color: var(--primary); }
        #teamChem { color: var(--accent); }

        .kits-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 10px; }
        .kit-card { background: var(--glass); border: 1px solid var(--glass-border); border-radius: 12px; padding: 15px; text-align: center; transition: 0.3s; cursor: pointer; }
        .kit-card:hover { transform: translateY(-3px); border-color: var(--primary); background: rgba(255,255,255,0.1); }
        .kit-icon { font-size: 2.5rem; margin-bottom: 10px; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.5)); }
        
        /* Cores Camisas */
        .kit-palmeiras { background: linear-gradient(to bottom, #006437, #006437); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .kit-flamengo { background: linear-gradient(to right, #c32a2a 50%, #111 50%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .kit-corinthians { background: linear-gradient(to bottom, #fff 40%, #111 100%); -webkit-text-fill-color: rgba(255,255,255,0.9); }
        .kit-saopaulo { background: linear-gradient(to right, #c32a2a 33%, #fff 33%, #fff 66%, #111 66%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .kit-gremio { background: linear-gradient(to right, #0d80bf 33%, #fff 33%, #fff 66%, #111 66%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .kit-botafogo { background: linear-gradient(to right, #111 50%, #fff 50%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .team-name { font-size: 0.8rem; font-weight: 500; color: #ccc; }

        /* JOGADOR */
        .player-card {
            position: absolute;
            width: 60px;
            display: flex; flex-direction: column; align-items: center;
            cursor: pointer; transform: translate(-50%, -50%);
            transition: transform 0.1s; z-index: 10;
        }
        /* Ajuste para o banco */
        .bench-slot .player-card {
            position: relative; transform: none; top: 0; left: 0; width: 100%; height: 100%;
            justify-content: center;
        }
        .bench-slot .pos-badge { top: 0; right: 0; }
        
        .avatar-container {
            width: 42px; height: 42px;
            background: #222; border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            display: flex; justify-content: center; align-items: center;
            overflow: hidden; position: relative;
        }
        .avatar-img { width: 100%; height: 100%; object-fit: cover; }
        .pos-badge {
            position: absolute; top: -5px; right: -5px;
            background: var(--bg-dark); color: var(--primary);
            font-size: 0.6rem; font-weight: bold; padding: 2px 4px;
            border-radius: 6px; border: 1px solid var(--primary); z-index: 2;
        }
        .info-box {
            margin-top: -5px;
            background: rgba(10, 10, 10, 0.9); backdrop-filter: blur(4px);
            padding: 2px 5px; border-radius: 4px;
            border: 1px solid rgba(255,255,255,0.1);
            text-align: center; min-width: 60px;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }
        .p-name { font-family: 'Teko'; font-size: 0.8rem; line-height: 1; color: white; }
        
        .empty-card .avatar-container { background: rgba(0,0,0,0.3); border: 2px dashed rgba(255,255,255,0.3); }
        .empty-card .info-box { display: none; }
        .empty-label { margin-top: 5px; background: var(--accent); color: white; padding: 1px 5px; border-radius: 3px; font-size: 0.6rem; }

        /* SIDEBAR */
        .sidebar {
            position: fixed; top: 0; right: -100%;
            width: 100%; max-width: 320px; height: 100%;
            background: #111; box-shadow: -5px 0 30px rgba(0,0,0,0.9);
            transition: 0.3s ease-in-out; z-index: 50;
            display: flex; flex-direction: column; border-left: 1px solid #333;
        }
        .sidebar.active { right: 0; }
        .sidebar-header { padding: 15px; background: #181818; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; }
        .sidebar-title { font-family: 'Teko'; font-size: 1.4rem; color: var(--primary); }
        .close-btn { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }
        .search-container { padding: 10px; }
        #searchInput { width: 100%; background: #222; border: 1px solid #444; color: white; padding: 10px; border-radius: 6px; outline: none; font-family: 'Outfit'; }
        .player-list { flex: 1; overflow-y: auto; padding: 0 10px 20px; }
        .list-item { display: flex; align-items: center; background: #1f1f1f; margin-bottom: 8px; padding: 8px; border-radius: 6px; cursor: pointer; border-left: 3px solid transparent; transition: 0.2s; }
        .list-item:hover { background: #2a2a2a; border-left-color: var(--primary); }
        .list-img { width: 35px; height: 35px; border-radius: 50%; background: #333; margin-right: 10px; overflow: hidden; }
        .list-details h4 { font-size: 0.9rem; }
        .list-details p { font-size: 0.7rem; color: #888; }
        .list-pos { font-size: 0.7rem; color: var(--primary); font-weight: bold; margin-left: auto; }
        
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 40; opacity: 0; pointer-events: none; transition: 0.3s; }
        .overlay.active { opacity: 1; pointer-events: auto; }

        @media (max-width: 800px) {
            .main-layout { flex-direction: column; overflow-y: auto; }
            .capture-zone { height: auto; min-height: 600px; flex: none; justify-content: flex-start; padding-top: 10px; }
            .pitch { width: 300px; height: 420px; }
            .bench-container { height: auto; padding: 10px 0; }
            .bench-slot { width: 40px; height: 60px; }
            .kits-section { width: 100%; flex: none; }
        }
    </style>
</head>
<body>

    <header>
        <div class="brand">
            <i class="fas fa-shield-alt" style="color:var(--primary)"></i> FUT MASTER
        </div>
        <div class="controls">
            <button class="action-btn download-btn" onclick="downloadSquad()">
                <i class="fas fa-camera"></i> Baixar Time
            </button>
            <button class="action-btn" onclick="resetAll()"><i class="fas fa-trash"></i></button>
            <select id="formationSelect">
                <option value="4-3-3">4-3-3 Ofensivo</option>
                <option value="4-4-2">4-4-2 Clássico</option>
                <option value="3-5-2">3-5-2 Moderno</option>
                <option value="4-2-3-1">4-2-3-1</option>
                <option value="5-3-2">5-3-2 Retranca</option>
            </select>
        </div>
    </header>

    <div class="main-layout">
        
        <section class="capture-zone" id="captureArea">
            
            <div class="pitch-container">
                <div class="pitch" id="pitch">
                    <div class="line mid-line"></div>
                    <div class="line center-circle"></div>
                    <div class="line box-top"></div>
                    <div class="line box-bottom"></div>
                    </div>
            </div>

            <div class="bench-container">
                <div class="bench-box" id="benchList">
                    </div>
            </div>

        </section>

        <aside class="kits-section">
            <div class="section-title">Análise do Time</div>
            
            <div class="stats-panel">
                <div class="stat-row">
                    <span class="stat-label">Rating Geral</span>
                    <span class="stat-val" id="teamRating">0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Química</span>
                    <span class="stat-val" id="teamChem">0%</span>
                </div>
                <div style="font-size:0.7rem; color:#666; margin-top:5px">Calculado em tempo real.</div>
            </div>

            <div class="section-title" style="margin-top:20px">Uniformes</div>
            <div class="kits-grid">
                <div class="kit-card" onclick="changeKit('palmeiras')">
                    <i class="fas fa-tshirt kit-icon kit-palmeiras"></i>
                    <div class="team-name">Verde</div>
                </div>
                <div class="kit-card" onclick="changeKit('flamengo')">
                    <i class="fas fa-tshirt kit-icon kit-flamengo"></i>
                    <div class="team-name">Rubro</div>
                </div>
                <div class="kit-card" onclick="changeKit('corinthians')">
                    <i class="fas fa-tshirt kit-icon kit-corinthians"></i>
                    <div class="team-name">Alvinegro</div>
                </div>
                <div class="kit-card" onclick="changeKit('saopaulo')">
                    <i class="fas fa-tshirt kit-icon kit-saopaulo"></i>
                    <div class="team-name">Tricolor</div>
                </div>
                <div class="kit-card" onclick="changeKit('gremio')">
                    <i class="fas fa-tshirt kit-icon kit-gremio"></i>
                    <div class="team-name">Imortal</div>
                </div>
                <div class="kit-card" onclick="changeKit('botafogo')">
                    <i class="fas fa-tshirt kit-icon kit-botafogo"></i>
                    <div class="team-name">Estrela</div>
                </div>
            </div>
        </aside>

    </div>

    <div class="overlay" id="overlay" onclick="closeSidebar()"></div>
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-title">Escalar Jogador</div>
            <button class="close-btn" onclick="closeSidebar()">&times;</button>
        </div>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Buscar nome...">
        </div>
        <div class="player-list" id="playerList"></div>
    </div>

    <script>
        // --- BASE DE DADOS COMPLETA (Jogadores) ---
        const playersData = [
            // PALMEIRAS
            { name: "Carlos Miguel", team: "Palmeiras", pos: ["GOL"] },
            { name: "Marcelo Lomba", team: "Palmeiras", pos: ["GOL"] },
            { name: "Aranha", team: "Palmeiras", pos: ["GOL"] },
            { name: "Murilo", team: "Palmeiras", pos: ["ZAG"] },
            { name: "Gustavo Gómez", team: "Palmeiras", pos: ["ZAG"] },
            { name: "Bruno Fuchs", team: "Palmeiras", pos: ["ZAG"] },
            { name: "Luis Benedetti", team: "Palmeiras", pos: ["ZAG"] },
            { name: "Agustín Giay", team: "Palmeiras", pos: ["LAT"] },
            { name: "Khellven", team: "Palmeiras", pos: ["LAT"] },
            { name: "Piquerez", team: "Palmeiras", pos: ["LAT"] },
            { name: "Jefté", team: "Palmeiras", pos: ["LAT"] },
            { name: "Arthur Gabriel", team: "Palmeiras", pos: ["LAT"] },
            { name: "E. Martínez", team: "Palmeiras", pos: ["VOL"] },
            { name: "Marlon Freitas", team: "Palmeiras", pos: ["VOL"] },
            { name: "Luis Pacheco", team: "Palmeiras", pos: ["VOL"] },
            { name: "Andreas Pereira", team: "Palmeiras", pos: ["MEI"] },
            { name: "L. Evangelista", team: "Palmeiras", pos: ["MEI"] },
            { name: "Mauricio", team: "Palmeiras", pos: ["MEI"] },
            { name: "Figueiredo", team: "Palmeiras", pos: ["MEI"] },
            { name: "Larson", team: "Palmeiras", pos: ["MEI"] },
            { name: "Jhon Arias", team: "Palmeiras", pos: ["ATA"] },
            { name: "Ramón Sosa", team: "Palmeiras", pos: ["ATA"] },
            { name: "Felipe Anderson", team: "Palmeiras", pos: ["ATA"] },
            { name: "Paulinho", team: "Palmeiras", pos: ["ATA"] },
            { name: "Bruno Rodrigues", team: "Palmeiras", pos: ["ATA"] },
            { name: "Riquelme Fillipi", team: "Palmeiras", pos: ["ATA"] },
            { name: "Allan (ATA)", team: "Palmeiras", pos: ["ATA"] },
            { name: "Vitor Roque", team: "Palmeiras", pos: ["CA"] },
            { name: "J. M. López", team: "Palmeiras", pos: ["CA"] },
            { name: "Luighi", team: "Palmeiras", pos: ["CA"] },
            { name: "Erick Belé", team: "Palmeiras", pos: ["CA"] },

            // CORINTHIANS
            { name: "Hugo Souza", team: "Corinthians", pos: ["GOL"] },
            { name: "Matheus Donelli", team: "Corinthians", pos: ["GOL"] },
            { name: "Felipe Longo", team: "Corinthians", pos: ["GOL"] },
            { name: "Kauê", team: "Corinthians", pos: ["GOL"] },
            { name: "André Ramalho", team: "Corinthians", pos: ["ZAG"] },
            { name: "Tchoca", team: "Corinthians", pos: ["ZAG"] },
            { name: "Cacá", team: "Corinthians", pos: ["ZAG"] },
            { name: "Gustavo Henrique", team: "Corinthians", pos: ["ZAG"] },
            { name: "Gabriel Paulista", team: "Corinthians", pos: ["ZAG"] },
            { name: "Renato Santos", team: "Corinthians", pos: ["ZAG"] },
            { name: "Matheuzinho", team: "Corinthians", pos: ["LAT"] },
            { name: "Pedro Milans", team: "Corinthians", pos: ["LAT"] },
            { name: "Matheus Bidu", team: "Corinthians", pos: ["LAT"] },
            { name: "Hugo", team: "Corinthians", pos: ["LAT"] },
            { name: "Fabrizio Angileri", team: "Corinthians", pos: ["LAT"] },
            { name: "Raniele", team: "Corinthians", pos: ["VOL"] },
            { name: "Allan", team: "Corinthians", pos: ["VOL"] },
            { name: "José Martínez", team: "Corinthians", pos: ["VOL"] },
            { name: "Charles", team: "Corinthians", pos: ["VOL"] },
            { name: "Rodrigo Garro", team: "Corinthians", pos: ["MEI"] },
            { name: "Breno Bidon", team: "Corinthians", pos: ["MEI"] },
            { name: "Alex Santana", team: "Corinthians", pos: ["MEI"] },
            { name: "Matheus Pereira", team: "Corinthians", pos: ["MEI"] },
            { name: "André Carrillo", team: "Corinthians", pos: ["MEI"] },
            { name: "Vitinho", team: "Corinthians", pos: ["ATA"] },
            { name: "Kaio César", team: "Corinthians", pos: ["ATA"] },
            { name: "Kayke", team: "Corinthians", pos: ["ATA"] },
            { name: "Dieguinho", team: "Corinthians", pos: ["ATA"] },
            { name: "Yuri Alberto", team: "Corinthians", pos: ["CA"] },
            { name: "Memphis Depay", team: "Corinthians", pos: ["CA", "ATA"] },
            { name: "Pedro Raul", team: "Corinthians", pos: ["CA"] },
            { name: "Gui Negão", team: "Corinthians", pos: ["CA"] },

            // SÃO PAULO
            { name: "Carlos Coronel", team: "São Paulo", pos: ["GOL"] },
            { name: "Rafael", team: "São Paulo", pos: ["GOL"] },
            { name: "Young", team: "São Paulo", pos: ["GOL"] },
            { name: "Felipe Preis", team: "São Paulo", pos: ["GOL"] },
            { name: "Nahuel Ferraresi", team: "São Paulo", pos: ["ZAG"] },
            { name: "Alan Franco", team: "São Paulo", pos: ["ZAG"] },
            { name: "Rafael Tolói", team: "São Paulo", pos: ["ZAG"] },
            { name: "Arboleda", team: "São Paulo", pos: ["ZAG"] },
            { name: "Sabino", team: "São Paulo", pos: ["ZAG"] },
            { name: "Matheus Dória", team: "São Paulo", pos: ["ZAG"] },
            { name: "Cédric Soares", team: "São Paulo", pos: ["LAT"] },
            { name: "Maik", team: "São Paulo", pos: ["LAT"] },
            { name: "Lucas Ramon", team: "São Paulo", pos: ["LAT"] },
            { name: "Igor Felisberto", team: "São Paulo", pos: ["LAT"] },
            { name: "Enzo Díaz", team: "São Paulo", pos: ["LAT"] },
            { name: "Wendell", team: "São Paulo", pos: ["LAT"] },
            { name: "Nicolas", team: "São Paulo", pos: ["LAT"] },
            { name: "Pablo Maia", team: "São Paulo", pos: ["VOL"] },
            { name: "Luan", team: "São Paulo", pos: ["VOL"] },
            { name: "Felipe Negrucci", team: "São Paulo", pos: ["VOL"] },
            { name: "Hugo Leonardo", team: "São Paulo", pos: ["VOL"] },
            { name: "Oscar", team: "São Paulo", pos: ["MEI"] },
            { name: "Marcos Antônio", team: "São Paulo", pos: ["MEI"] },
            { name: "Damián Bobadilla", team: "São Paulo", pos: ["MEI"] },
            { name: "Alisson", team: "São Paulo", pos: ["MEI"] },
            { name: "Danielzinho", team: "São Paulo", pos: ["MEI"] },
            { name: "Pedro Ferreira", team: "São Paulo", pos: ["MEI"] },
            { name: "Lucas Moura", team: "São Paulo", pos: ["ATA"] },
            { name: "Ferreirinha", team: "São Paulo", pos: ["ATA"] },
            { name: "Tetê", team: "São Paulo", pos: ["ATA"] },
            { name: "Lucca", team: "São Paulo", pos: ["ATA"] },
            { name: "Ryan Francisco", team: "São Paulo", pos: ["ATA"] },
            { name: "Gonzalo Tapia", team: "São Paulo", pos: ["ATA"] },
            { name: "André Silva", team: "São Paulo", pos: ["ATA"] },
            { name: "Calleri", team: "São Paulo", pos: ["CA"] },
            { name: "Luciano", team: "São Paulo", pos: ["CA", "ATA"] },
            { name: "Paulinho (CA)", team: "São Paulo", pos: ["CA"] },

            // FLAMENGO
            { name: "Agustín Rossi", team: "Flamengo", pos: ["GOL"] },
            { name: "Andrew", team: "Flamengo", pos: ["GOL"] },
            { name: "Dyogo Alves", team: "Flamengo", pos: ["GOL"] },
            { name: "Léo Pereira", team: "Flamengo", pos: ["ZAG"] },
            { name: "Léo Ortiz", team: "Flamengo", pos: ["ZAG"] },
            { name: "Vitão", team: "Flamengo", pos: ["ZAG"] },
            { name: "Danilo (ZAG)", team: "Flamengo", pos: ["ZAG"] },
            { name: "João Victor", team: "Flamengo", pos: ["ZAG"] },
            { name: "Emerson Royal", team: "Flamengo", pos: ["LAT"] },
            { name: "Varela", team: "Flamengo", pos: ["LAT"] },
            { name: "Ayrton Lucas", team: "Flamengo", pos: ["LAT"] },
            { name: "Alex Sandro", team: "Flamengo", pos: ["LAT"] },
            { name: "Erick Pulgar", team: "Flamengo", pos: ["VOL"] },
            { name: "Jorginho", team: "Flamengo", pos: ["VOL"] },
            { name: "Evertton Araújo", team: "Flamengo", pos: ["VOL"] },
            { name: "Lucas Paquetá", team: "Flamengo", pos: ["MEI"] },
            { name: "Arrascaeta", team: "Flamengo", pos: ["MEI"] },
            { name: "De La Cruz", team: "Flamengo", pos: ["MEI", "VOL"] },
            { name: "Saúl Ñíguez", team: "Flamengo", pos: ["MEI"] },
            { name: "Jorge Carrascal", team: "Flamengo", pos: ["MEI"] },
            { name: "Samuel Lino", team: "Flamengo", pos: ["ATA"] },
            { name: "Everton Cebolinha", team: "Flamengo", pos: ["ATA"] },
            { name: "Luiz Araújo", team: "Flamengo", pos: ["ATA"] },
            { name: "Gonzalo Plata", team: "Flamengo", pos: ["ATA"] },
            { name: "Wallace Yan", team: "Flamengo", pos: ["ATA"] },
            { name: "Bruno Henrique", team: "Flamengo", pos: ["ATA"] },
            { name: "Pedro", team: "Flamengo", pos: ["CA"] },
            { name: "Gabigol", team: "Flamengo", pos: ["CA"] },

            // BOTAFOGO
            { name: "Léo Linck", team: "Botafogo", pos: ["GOL"] },
            { name: "Neto", team: "Botafogo", pos: ["GOL"] },
            { name: "Cristhian Loor", team: "Botafogo", pos: ["GOL"] },
            { name: "Raul", team: "Botafogo", pos: ["GOL"] },
            { name: "Alex. Barboza", team: "Botafogo", pos: ["ZAG"] },
            { name: "Bastos", team: "Botafogo", pos: ["ZAG"] },
            { name: "Kaio", team: "Botafogo", pos: ["ZAG"] },
            { name: "Ythallo", team: "Botafogo", pos: ["ZAG"] },
            { name: "Vitinho", team: "Botafogo", pos: ["LAT"] },
            { name: "Mateo Ponte", team: "Botafogo", pos: ["LAT"] },
            { name: "Alex Telles", team: "Botafogo", pos: ["LAT"] },
            { name: "Marçal", team: "Botafogo", pos: ["LAT"] },
            { name: "Jhoan Hernández", team: "Botafogo", pos: ["LAT"] },
            { name: "Danilo", team: "Botafogo", pos: ["VOL"] },
            { name: "Newton", team: "Botafogo", pos: ["VOL"] },
            { name: "Allan (VOL)", team: "Botafogo", pos: ["VOL"] },
            { name: "Wallace Davi", team: "Botafogo", pos: ["VOL"] },
            { name: "Álvaro Montoro", team: "Botafogo", pos: ["MEI"] },
            { name: "Santiago Rodríguez", team: "Botafogo", pos: ["MEI"] },
            { name: "Jordan Barrera", team: "Botafogo", pos: ["MEI"] },
            { name: "Artur", team: "Botafogo", pos: ["ATA"] },
            { name: "Matheus Martins", team: "Botafogo", pos: ["ATA"] },
            { name: "Nathan Fernandes", team: "Botafogo", pos: ["ATA"] },
            { name: "Lucas Villalba", team: "Botafogo", pos: ["ATA"] },
            { name: "Joaquín Correa", team: "Botafogo", pos: ["ATA"] },
            { name: "Arthur Cabral", team: "Botafogo", pos: ["CA", "ATA"] },
            { name: "Chris Ramos", team: "Botafogo", pos: ["ATA"] },
            { name: "Tiquinho Soares", team: "Botafogo", pos: ["CA"] },

            // FLUMINENSE
            { name: "Fábio", team: "Fluminense", pos: ["GOL"] },
            { name: "Marcelo Pitaluga", team: "Fluminense", pos: ["GOL"] },
            { name: "Vitor Eudes", team: "Fluminense", pos: ["GOL"] },
            { name: "Juan Pablo Freytes", team: "Fluminense", pos: ["ZAG"] },
            { name: "Ignácio", team: "Fluminense", pos: ["ZAG"] },
            { name: "Igor Rabello", team: "Fluminense", pos: ["ZAG"] },
            { name: "Jemmes", team: "Fluminense", pos: ["ZAG"] },
            { name: "Davi Schuindt", team: "Fluminense", pos: ["ZAG"] },
            { name: "João Loiola", team: "Fluminense", pos: ["ZAG"] },
            { name: "Samuel Xavier", team: "Fluminense", pos: ["LAT"] },
            { name: "Guga", team: "Fluminense", pos: ["LAT"] },
            { name: "Julio Fidelis", team: "Fluminense", pos: ["LAT"] },
            { name: "Guilherme Arana", team: "Fluminense", pos: ["LAT"] },
            { name: "René", team: "Fluminense", pos: ["LAT"] },
            { name: "Martinelli", team: "Fluminense", pos: ["VOL"] },
            { name: "Facundo Bernal", team: "Fluminense", pos: ["VOL"] },
            { name: "Otávio", team: "Fluminense", pos: ["VOL"] },
            { name: "Hércules", team: "Fluminense", pos: ["VOL"] },
            { name: "Ganso", team: "Fluminense", pos: ["MEI"] },
            { name: "Nonato", team: "Fluminense", pos: ["MEI"] },
            { name: "Jefferson Savarino", team: "Fluminense", pos: ["MEI", "ATA"] },
            { name: "Luciano Acosta", team: "Fluminense", pos: ["MEI"] },
            { name: "David Terans", team: "Fluminense", pos: ["MEI"] },
            { name: "Rubén Lezcano", team: "Fluminense", pos: ["MEI"] },
            { name: "Yeferson Soteldo", team: "Fluminense", pos: ["ATA"] },
            { name: "Agustín Canobbio", team: "Fluminense", pos: ["ATA"] },
            { name: "Kevin Serna", team: "Fluminense", pos: ["ATA"] },
            { name: "Santiago Moreno", team: "Fluminense", pos: ["ATA"] },
            { name: "Matheus Reis", team: "Fluminense", pos: ["ATA"] },
            { name: "Riquelme", team: "Fluminense", pos: ["ATA"] },
            { name: "Germán Cano", team: "Fluminense", pos: ["CA"] },
            { name: "John Kennedy", team: "Fluminense", pos: ["CA"] },

            // GRÊMIO
            { name: "Weverton (GOL)", team: "Grêmio", pos: ["GOL"] },
            { name: "Gabriel Grando", team: "Grêmio", pos: ["GOL"] },
            { name: "Thiago Beltrame", team: "Grêmio", pos: ["GOL"] },
            { name: "Gabriel Menegon", team: "Grêmio", pos: ["GOL"] },
            { name: "Wagner Leonardo", team: "Grêmio", pos: ["ZAG"] },
            { name: "Walter Kannemann", team: "Grêmio", pos: ["ZAG"] },
            { name: "Fabián Balbuena", team: "Grêmio", pos: ["ZAG"] },
            { name: "Erick Noriega", team: "Grêmio", pos: ["ZAG"] },
            { name: "Gustavo Martins", team: "Grêmio", pos: ["ZAG"] },
            { name: "Viery", team: "Grêmio", pos: ["ZAG"] },
            { name: "Luis Eduardo", team: "Grêmio", pos: ["ZAG"] },
            { name: "João Pedro", team: "Grêmio", pos: ["LAT"] },
            { name: "Marcos Rocha", team: "Grêmio", pos: ["LAT"] },
            { name: "Caio Paulista", team: "Grêmio", pos: ["LAT"] },
            { name: "Marlon", team: "Grêmio", pos: ["LAT"] },
            { name: "Mathías Villasanti", team: "Grêmio", pos: ["VOL"] },
            { name: "Gustavo Cuéllar", team: "Grêmio", pos: ["VOL"] },
            { name: "Leonel Pérez", team: "Grêmio", pos: ["VOL"] },
            { name: "Dodi", team: "Grêmio", pos: ["VOL"] },
            { name: "Arthur Melo", team: "Grêmio", pos: ["MEI"] },
            { name: "Franco Cristaldo", team: "Grêmio", pos: ["MEI"] },
            { name: "Edenilson", team: "Grêmio", pos: ["MEI"] },
            { name: "J. I. Nardoni", team: "Grêmio", pos: ["MEI"] },
            { name: "Miguel Monsalve", team: "Grêmio", pos: ["MEI"] },
            { name: "Riquelme (GRE)", team: "Grêmio", pos: ["MEI"] },
            { name: "Gabriel Mec", team: "Grêmio", pos: ["MEI"] },
            { name: "Tetê (GRE)", team: "Grêmio", pos: ["ATA"] },
            { name: "Cristian Pavón", team: "Grêmio", pos: ["ATA"] },
            { name: "Francis Amuzu", team: "Grêmio", pos: ["ATA"] },
            { name: "Alexander Aravena", team: "Grêmio", pos: ["ATA"] },
            { name: "José Enamorado", team: "Grêmio", pos: ["ATA"] },
            { name: "André Henrique", team: "Grêmio", pos: ["ATA"] },
            { name: "Martin Braithwaite", team: "Grêmio", pos: ["CA"] },
            { name: "Carlos Vinícius", team: "Grêmio", pos: ["CA"] },
            { name: "Roger", team: "Grêmio", pos: ["CA"] },
            { name: "Willian", team: "Grêmio", pos: ["CA"] },

            // VASCO
            { name: "Léo Jardim", team: "Vasco", pos: ["GOL"] },
            { name: "Daniel Fuzato", team: "Vasco", pos: ["GOL"] },
            { name: "Pablo", team: "Vasco", pos: ["GOL"] },
            { name: "Robert Renan", team: "Vasco", pos: ["ZAG"] },
            { name: "Carlos Cuesta", team: "Vasco", pos: ["ZAG"] },
            { name: "Alan Saldivia", team: "Vasco", pos: ["ZAG"] },
            { name: "Lucas Freitas", team: "Vasco", pos: ["ZAG"] },
            { name: "Paulo Henrique", team: "Vasco", pos: ["LAT"] },
            { name: "José Luis Rodríguez", team: "Vasco", pos: ["LAT"] },
            { name: "Lucas Piton", team: "Vasco", pos: ["LAT"] },
            { name: "Cuiabano", team: "Vasco", pos: ["LAT"] },
            { name: "Thiago Mendes", team: "Vasco", pos: ["VOL"] },
            { name: "Tchê Tchê", team: "Vasco", pos: ["VOL"] },
            { name: "Jair", team: "Vasco", pos: ["VOL"] },
            { name: "Hugo Moura", team: "Vasco", pos: ["VOL"] },
            { name: "Cauan Barros", team: "Vasco", pos: ["VOL"] },
            { name: "Mateus Carvalho", team: "Vasco", pos: ["VOL"] },
            { name: "JP", team: "Vasco", pos: ["VOL"] },
            { name: "Philippe Coutinho", team: "Vasco", pos: ["MEI"] },
            { name: "Matheus França", team: "Vasco", pos: ["MEI"] },
            { name: "Guilherme Estrella", team: "Vasco", pos: ["MEI"] },
            { name: "Adson", team: "Vasco", pos: ["ATA"] },
            { name: "Andrés Gómez", team: "Vasco", pos: ["ATA"] },
            { name: "David", team: "Vasco", pos: ["ATA"] },
            { name: "Nuno Moreira", team: "Vasco", pos: ["ATA"] },
            { name: "Johan Rojas", team: "Vasco", pos: ["ATA"] },
            { name: "Marino Hinestroza", team: "Vasco", pos: ["ATA"] },
            { name: "Brenner", team: "Vasco", pos: ["ATA", "CA"] },
            { name: "Claudio Spinelli", team: "Vasco", pos: ["ATA"] },
             // CRUZEIRO
            { name: "Cássio", team: "Cruzeiro", pos: ["GOL"] },
            { name: "João Marcelo", team: "Cruzeiro", pos: ["ZAG"] },
            { name: "Lucas Villalba (CRU)", team: "Cruzeiro", pos: ["ZAG"] },
            { name: "William", team: "Cruzeiro", pos: ["LAT"] },
            { name: "Matheus Henrique", team: "Cruzeiro", pos: ["VOL"] },
            { name: "Walace", team: "Cruzeiro", pos: ["VOL"] },
            { name: "Matheus Pereira", team: "Cruzeiro", pos: ["MEI"] },
            { name: "Barreal", team: "Cruzeiro", pos: ["ATA"] },
            { name: "Kaio Jorge", team: "Cruzeiro", pos: ["CA"] },
            { name: "Gabriel Veron", team: "Cruzeiro", pos: ["ATA"] }
        ];

        // IDs Unicos
        playersData.forEach((p, i) => p.id = i + 1);

        // --- VARIÁVEIS DO SISTEMA ---
        const pitch = document.getElementById('pitch');
        const benchList = document.getElementById('benchList');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const playerList = document.getElementById('playerList');
        const searchInput = document.getElementById('searchInput');

        let activeSlot = null; // ID do slot clicado
        let activeType = null; // 'pitch' ou 'bench'
        let squad = {}; // Onde o time é salvo

        const formations = {
            '4-3-3': [
                {t: 88, l: 50, r:'GOL'}, 
                {t: 75, l: 15, r:'LAT'}, {t: 80, l: 38, r:'ZAG'}, {t: 80, l: 62, r:'ZAG'}, {t: 75, l: 85, r:'LAT'},
                {t: 60, l: 50, r:'VOL'}, {t: 45, l: 30, r:'MEI'}, {t: 45, l: 70, r:'MEI'},
                {t: 20, l: 15, r:'ATA'}, {t: 15, l: 50, r:'CA'}, {t: 20, l: 85, r:'ATA'}
            ],
            '4-4-2': [
                {t: 88, l: 50, r:'GOL'},
                {t: 75, l: 15, r:'LAT'}, {t: 80, l: 38, r:'ZAG'}, {t: 80, l: 62, r:'ZAG'}, {t: 75, l: 85, r:'LAT'},
                {t: 50, l: 20, r:'MEI'}, {t: 60, l: 40, r:'VOL'}, {t: 60, l: 60, r:'VOL'}, {t: 50, l: 80, r:'MEI'},
                {t: 20, l: 35, r:'ATA'}, {t: 20, l: 65, r:'CA'}
            ],
            '3-5-2': [
                {t: 90, l: 50, r:'GOL'},
                {t: 75, l: 25, r:'ZAG'}, {t: 78, l: 50, r:'ZAG'}, {t: 75, l: 75, r:'ZAG'},
                {t: 55, l: 10, r:'LAT'}, {t: 60, l: 35, r:'VOL'}, {t: 60, l: 65, r:'VOL'}, {t: 55, l: 90, r:'LAT'},
                {t: 40, l: 50, r:'MEI'},
                {t: 20, l: 35, r:'ATA'}, {t: 20, l: 65, r:'CA'}
            ],
            '4-2-3-1': [
                {t: 88, l: 50, r:'GOL'},
                {t: 75, l: 15, r:'LAT'}, {t: 80, l: 35, r:'ZAG'}, {t: 80, l: 65, r:'ZAG'}, {t: 75, l: 85, r:'LAT'},
                {t: 60, l: 40, r:'VOL'}, {t: 60, l: 60, r:'VOL'},
                {t: 40, l: 20, r:'MEI'}, {t: 35, l: 50, r:'MEI'}, {t: 40, l: 80, r:'MEI'},
                {t: 15, l: 50, r:'CA'}
            ],
            '5-3-2': [
                {t: 90, l: 50, r:'GOL'},
                {t: 70, l: 10, r:'LAT'}, {t: 80, l: 30, r:'ZAG'}, {t: 85, l: 50, r:'ZAG'}, {t: 80, l: 70, r:'ZAG'}, {t: 70, l: 90, r:'LAT'},
                {t: 55, l: 40, r:'VOL'}, {t: 55, l: 60, r:'VOL'}, {t: 45, l: 50, r:'MEI'},
                {t: 20, l: 35, r:'ATA'}, {t: 20, l: 65, r:'CA'}
            ]
        };

        function init() {
            renderPitch('4-3-3');
            renderBench();
            document.getElementById('formationSelect').addEventListener('change', e => {
                // Ao mudar formação, mantemos os jogadores se possivel, mas limpamos o visual
                renderPitch(e.target.value);
            });
            searchInput.addEventListener('input', renderList);
        }

        // Renderiza Titulares
        function renderPitch(fmt) {
            pitch.innerHTML = `
                <div class="line mid-line"></div>
                <div class="line center-circle"></div>
                <div class="line box-top"></div>
                <div class="line box-bottom"></div>
            `;
            formations[fmt].forEach((pos, i) => {
                const el = document.createElement('div');
                el.className = 'player-card empty-card';
                el.style.top = pos.t + '%';
                el.style.left = pos.l + '%';
                el.id = `slot-pitch-${i}`;
                
                // Se já tem jogador salvo nesse slot, restaura
                if(squad[`pitch-${i}`]) updateSlotUI(el, squad[`pitch-${i}`], pos.r);
                else updateSlotUI(el, null, pos.r);
                
                el.onclick = () => openSidebar(i, pos.r, 'pitch');
                pitch.appendChild(el);
            });
        }

        // Renderiza Reservas (7 slots fixos)
        function renderBench() {
            benchList.innerHTML = '';
            for(let i=0; i<7; i++) {
                const el = document.createElement('div');
                el.className = 'bench-slot empty-card';
                el.id = `slot-bench-${i}`;
                
                if(squad[`bench-${i}`]) updateSlotUI(el, squad[`bench-${i}`], 'RES');
                else {
                     el.innerHTML = `<div class="bench-label">RES</div>`;
                }

                el.onclick = () => openSidebar(i, 'RES', 'bench');
                benchList.appendChild(el);
            }
        }

        function updateSlotUI(el, p, role) {
            if(p) {
                el.className = el.id.includes('bench') ? 'bench-slot' : 'player-card';
                el.innerHTML = `
                    <div class="pos-badge">${p.pos[0]}</div>
                    <div class="avatar-container">
                        <img src="https://ui-avatars.com/api/?name=${p.name}&background=random&color=fff&size=128" class="avatar-img" crossOrigin="anonymous">
                    </div>
                    <div class="info-box">
                        <div class="p-name">${p.name.split(' ')[0]}</div>
                    </div>
                `;
            } else {
                if(el.id.includes('bench')) {
                    el.className = 'bench-slot empty-card';
                    el.innerHTML = `<div class="bench-label">RES</div><div class="avatar-container" style="border:none;box-shadow:none;background:transparent;opacity:0.3"><i class="fas fa-plus"></i></div>`;
                } else {
                    el.className = 'player-card empty-card';
                    el.innerHTML = `
                        <div class="avatar-container"><i class="fas fa-plus"></i></div>
                        <div class="empty-label">${role}</div>
                    `;
                }
            }
        }

        // --- SISTEMA DE SELEÇÃO ---
        function openSidebar(idx, role, type) {
            activeSlot = idx;
            activeType = type;
            sidebar.classList.add('active');
            overlay.classList.add('active');
            document.querySelector('.sidebar-title').innerText = `Escolher ${role}`;
            searchInput.value = '';
            renderList();
        }

        function closeSidebar() {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
        }

        function renderList() {
            const term = searchInput.value.toLowerCase();
            playerList.innerHTML = '';
            
            // Botão remover
            const slotKey = `${activeType}-${activeSlot}`;
            if(squad[slotKey]) {
                const rm = document.createElement('div');
                rm.className = 'list-item';
                rm.innerHTML = '<div style="color:red; text-align:center; width:100%"><i class="fas fa-times"></i> Remover Jogador</div>';
                rm.onclick = () => selectPlayer(null);
                playerList.appendChild(rm);
            }

            const filtered = playersData.filter(p => {
                return p.name.toLowerCase().includes(term) || p.team.toLowerCase().includes(term);
            });

            filtered.forEach(p => {
                // Não mostrar jogador já escalado em OUTRO slot
                if(Object.values(squad).some(s => s && s.id === p.id && s.id !== squad[slotKey]?.id)) return;

                const d = document.createElement('div');
                d.className = 'list-item';
                d.innerHTML = `
                    <div class="list-img">
                        <img src="https://ui-avatars.com/api/?name=${p.name}&background=random&color=fff" style="width:100%">
                    </div>
                    <div class="list-details">
                        <h4>${p.name}</h4>
                        <p>${p.team}</p>
                    </div>
                    <div class="list-pos">${p.pos[0]}</div>
                `;
                d.onclick = () => selectPlayer(p);
                playerList.appendChild(d);
            });
        }

        function selectPlayer(p) {
            const slotKey = `${activeType}-${activeSlot}`;
            squad[slotKey] = p;
            
            const el = document.getElementById(`slot-${slotKey}`);
            // Pega a role original do dataset ou visual, aqui simplificado
            const role = activeType === 'bench' ? 'RES' : 'JOG'; 
            
            updateSlotUI(el, p, role);
            updateStats();
            closeSidebar();
        }

        // --- CÁLCULOS E STATS ---
        function updateStats() {
            const players = Object.values(squad).filter(p => p);
            if(players.length === 0) {
                document.getElementById('teamRating').innerText = "0";
                document.getElementById('teamChem').innerText = "0%";
                return;
            }

            // Cálculo Rating (Fictício para demo: Base 75 + bonus aleatorio do ID)
            // Em app real, usaria p.rating
            let totalRate = 0;
            players.forEach(p => {
                const pseudoRate = 78 + (p.name.length % 15); // Gera numero entre 78 e 92
                totalRate += pseudoRate;
            });
            const avg = Math.floor(totalRate / players.length);

            // Cálculo Química (Baseado em time)
            // Lógica: Se jogadores forem do mesmo time, ganham pontos
            let chemPoints = 0;
            const teamsCount = {};
            players.forEach(p => {
                teamsCount[p.team] = (teamsCount[p.team] || 0) + 1;
            });
            
            // Química aumenta se tiver muitos do mesmo time
            let maxSyn = 0;
            Object.values(teamsCount).forEach(c => {
                if(c > 1) maxSyn += (c * 10); 
            });
            
            // Base chem por jogar na posição correta (simulado: ganha 5pts por jogador)
            const baseChem = players.length * 5;
            let finalChem = Math.min(100, baseChem + maxSyn);

            // Animação números
            animateValue("teamRating", parseInt(document.getElementById('teamRating').innerText), avg, 1000);
            animateValue("teamChem", parseInt(document.getElementById('teamChem').innerText), finalChem, 1000, "%");
        }

        function animateValue(id, start, end, duration, suffix = "") {
            if (start === end) return;
            const range = end - start;
            let current = start;
            const increment = end > start ? 1 : -1;
            const stepTime = Math.abs(Math.floor(duration / range));
            const obj = document.getElementById(id);
            const timer = setInterval(function() {
                current += increment;
                obj.innerText = current + suffix;
                if (current == end) clearInterval(timer);
            }, stepTime > 50 ? 50 : stepTime); // Max speed cap
        }

        function changeKit(teamClass) {
            // Apenas um visual effect simples, poderia trocar cores do CSS global
            document.documentElement.style.setProperty('--primary', getColor(teamClass));
        }

        function getColor(team) {
            if(team === 'palmeiras') return '#00ff88';
            if(team === 'flamengo') return '#ff3333';
            if(team === 'corinthians') return '#ffffff';
            if(team === 'saopaulo') return '#ffaaaa';
            if(team === 'gremio') return '#33ccff';
            if(team === 'botafogo') return '#cccccc';
            return '#00f2ff';
        }

        function resetAll() {
            squad = {};
            init(); // Re-renderiza tudo vazio
            updateStats();
        }

        // --- DOWNLOAD DA IMAGEM ---
        function downloadSquad() {
            const btn = document.querySelector('.download-btn');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Gerando...';

            const element = document.getElementById('captureArea');

            html2canvas(element, {
                backgroundColor: null, // Fundo Transparente
                useCORS: true, // Importante para as imagens de avatar
                scale: 2 // Alta resolução
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'meu-fut26-squad.png';
                link.href = canvas.toDataURL("image/png");
                link.click();
                
                btn.innerHTML = originalText;
            }).catch(err => {
                alert('Erro ao gerar imagem. Tente novamente.');
                btn.innerHTML = originalText;
                console.error(err);
            });
        }

        init();
    </script>
</body>
</html>
